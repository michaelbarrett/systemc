//dm.cpp
//Data Memory Module cpp
#include "dm.h"

void data_memory :: prc() {
  //if enabled and writing
  if (en & rw) {
    //we look at the address and the data input and based on this change local _data
    //data array _data can be any length, it is supplied in module instantiation
    _data[addr.read()] = d_in;
  }
  //if enabled and reading
  else if (en & !rw) {
    d_out.write(_data[addr.read()]);
  }
  //if disabled
  else {
    //do nothing
  }
}
